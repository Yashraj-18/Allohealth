(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{9672:function(e,t,a){Promise.resolve().then(a.bind(a,6660))},2513:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4817:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6660:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(7437),l=a(2265),i=a(6463),n=a(1313),r=a(8726),c=a(2513),d=a(4817),o=a(2800);function m(){var e;let[t,a]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),[u,h]=(0,l.useState)(!0),[p,j]=(0,l.useState)(!1),[g,v]=(0,l.useState)(!1),[N,y]=(0,l.useState)(null),[f,b]=(0,l.useState)({doctor:"",date:"",status:"",search:""}),[w,k]=(0,l.useState)({patientName:"",phone:"",doctorId:"",date:"",time:""}),[C,A]=(0,l.useState)({date:"",time:""});(0,i.useRouter)(),(0,l.useEffect)(()=>{S()},[]);let S=async()=>{try{h(!0);let[e,t]=await Promise.all([o.mr.getAll(f),o.vY.getAll()]);200===e.statusCode&&a(e.data),200===t.statusCode&&x(t.data)}catch(e){console.error("Error fetching data:",e),r.Am.error("Failed to fetch data")}finally{h(!1)}},M=t.filter(e=>{var t,a;let s=!f.doctor||(null===(t=e.doctor)||void 0===t?void 0:t.name)===f.doctor,l=!f.date||e.date===f.date,i=!f.status||e.status===f.status,n=!f.search||e.patientName.toLowerCase().includes(f.search.toLowerCase())||(null===(a=e.doctor)||void 0===a?void 0:a.name.toLowerCase().includes(f.search.toLowerCase()));return s&&l&&i&&n}),P=async()=>{if(!w.patientName||!w.doctorId||!w.date||!w.time){r.Am.error("Please fill in all required fields");return}try{let e=await o.mr.create({patientName:w.patientName,phone:w.phone||void 0,doctorId:parseInt(w.doctorId),date:w.date,timeSlot:w.time});201===e.statusCode&&(await S(),k({patientName:"",phone:"",doctorId:"",date:"",time:""}),j(!1),r.Am.success(e.message))}catch(e){console.error("Error booking appointment:",e),r.Am.error("Failed to book appointment")}},D=async()=>{if(!C.date||!C.time||!N){r.Am.error("Please fill in all required fields");return}try{let e=await o.mr.update(N.id,{date:C.date,timeSlot:C.time});200===e.statusCode&&(await S(),A({date:"",time:""}),v(!1),y(null),r.Am.success("Appointment rescheduled successfully"))}catch(e){console.error("Error rescheduling appointment:",e),r.Am.error("Failed to reschedule appointment")}},E=async e=>{if(confirm("Are you sure you want to cancel this appointment?"))try{let t=await o.mr.cancel(e);200===t.statusCode&&(await S(),r.Am.success("Appointment cancelled successfully"))}catch(e){console.error("Error cancelling appointment:",e),r.Am.error("Failed to cancel appointment")}},I=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},F=["09:00 AM","09:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","02:00 PM","02:30 PM","03:00 PM","03:30 PM","04:00 PM","04:30 PM"];return(0,s.jsx)(n.Z,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Appointments"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage patient appointments and scheduling"})]}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"btn-primary flex items-center",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Book Appointment"]})]})}),(0,s.jsx)("div",{className:"card mb-6",children:(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:f.search,onChange:e=>b(t=>({...t,search:e.target.value})),className:"input-field pl-10",placeholder:"Search patients..."})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),(0,s.jsxs)("select",{value:f.doctor,onChange:e=>b(t=>({...t,doctor:e.target.value})),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"All Doctors"}),m.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,s.jsx)("input",{type:"date",value:f.date,onChange:e=>b(t=>({...t,date:e.target.value})),className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:f.status,onChange:e=>b(t=>({...t,status:e.target.value})),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"All Status"}),(0,s.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{onClick:()=>b({doctor:"",date:"",status:"",search:""}),className:"btn-secondary w-full",children:"Clear Filters"})})]})})}),p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,s.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Book New Appointment"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Patient Name *"}),(0,s.jsx)("input",{type:"text",value:w.patientName,onChange:e=>k(t=>({...t,patientName:e.target.value})),className:"input-field mt-1",placeholder:"Enter patient name",autoFocus:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,s.jsx)("input",{type:"tel",value:w.phone,onChange:e=>k(t=>({...t,phone:e.target.value})),className:"input-field mt-1",placeholder:"Enter phone number"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Doctor *"}),(0,s.jsxs)("select",{value:w.doctorId,onChange:e=>k(t=>({...t,doctorId:e.target.value})),className:"input-field mt-1",children:[(0,s.jsx)("option",{value:"",children:"Select a doctor"}),m.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - ",e.specialization]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date *"}),(0,s.jsx)("input",{type:"date",value:w.date,onChange:e=>k(t=>({...t,date:e.target.value})),className:"input-field mt-1",min:new Date().toISOString().split("T")[0]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Time *"}),(0,s.jsxs)("select",{value:w.time,onChange:e=>k(t=>({...t,time:e.target.value})),className:"input-field mt-1",children:[(0,s.jsx)("option",{value:"",children:"Select time"}),F.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>j(!1),className:"btn-secondary",children:"Cancel"}),(0,s.jsx)("button",{onClick:P,className:"btn-primary",children:"Book Appointment"})]})]})})}),g&&N&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,s.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reschedule Appointment"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Rescheduling appointment for ",N.patientName," with ",(null===(e=N.doctor)||void 0===e?void 0:e.name)||"N/A"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New Date *"}),(0,s.jsx)("input",{type:"date",value:C.date,onChange:e=>A(t=>({...t,date:e.target.value})),className:"input-field mt-1",min:new Date().toISOString().split("T")[0]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New Time *"}),(0,s.jsxs)("select",{value:C.time,onChange:e=>A(t=>({...t,time:e.target.value})),className:"input-field mt-1",children:[(0,s.jsx)("option",{value:"",children:"Select time"}),F.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>{v(!1),y(null)},className:"btn-secondary",children:"Cancel"}),(0,s.jsx)("button",{onClick:D,className:"btn-primary",children:"Reschedule"})]})]})})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"px-4 py-5 sm:p-6",children:u?(0,s.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"})]},t))}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patientName}),e.phone&&(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:(null===(t=e.doctor)||void 0===t?void 0:t.name)||"N/A"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.date).toLocaleDateString()})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.timeSlot})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(I(e.status)),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsx)("div",{className:"flex space-x-2",children:"scheduled"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{y(e),v(!0)},className:"text-blue-600 hover:text-blue-900",children:"Reschedule"}),(0,s.jsx)("button",{onClick:()=>E(e.id),className:"text-red-600 hover:text-red-900",children:"Cancel"})]})})})]},e.id)})})]})})})})]})})}}},function(e){e.O(0,[256,726,313,971,23,744],function(){return e(e.s=9672)}),_N_E=e.O()}]);