(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{1582:function(e,t,s){Promise.resolve().then(s.bind(s,3247))},933:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},2513:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(8030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),l=s(2265),i=s(6463),c=s(1313),r=s(8726),n=s(933),d=s(8279),m=s(8030);let x=(0,m.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),o=(0,m.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var h=s(2513),u=s(2800);let p={waiting:"bg-yellow-100 text-yellow-800","with-doctor":"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800"},g={waiting:n.Z,"with-doctor":d.Z,completed:x};function N(){let e,t,s;let[m,N]=(0,l.useState)([]),[j,y]=(0,l.useState)(!0),[f,v]=(0,l.useState)(!1),[w,b]=(0,l.useState)(!1),[k,C]=(0,l.useState)({name:"",phone:""});(0,i.useRouter)(),(0,l.useEffect)(()=>{A()},[]);let A=async()=>{try{v(!0);let e=await u.CN.getCurrent();200===e.statusCode&&N(e.data.queue)}catch(e){console.error("Error fetching queue:",e),r.Am.error("Failed to fetch queue data")}finally{y(!1),v(!1)}},Z=async(e,t)=>{try{let s=await u.CN.updateStatus(e,t);200===s.statusCode&&(await A(),r.Am.success("Patient status updated successfully"))}catch(e){console.error("Error updating patient status:",e),r.Am.error("Failed to update patient status")}},P=async()=>{if(!k.name.trim()){r.Am.error("Please enter patient name");return}try{let e=await u.CN.addPatient({patientName:k.name,phone:k.phone||void 0});201===e.statusCode&&(await A(),C({name:"",phone:""}),b(!1),r.Am.success(e.message))}catch(e){console.error("Error adding patient to queue:",e),r.Am.error("Failed to add patient to queue")}};return(0,a.jsx)(c.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Patient Queue"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage patient queue and track their status"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:A,disabled:f,className:"btn-secondary flex items-center",children:[(0,a.jsx)(o,{className:"w-4 h-4 mr-2 ".concat(f?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)("button",{onClick:()=>b(!0),className:"btn-primary flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Add Patient"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 mb-6",children:[(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(n.Z,{className:"h-5 w-5 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Waiting"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-yellow-600",children:(e="waiting",m.filter(t=>t.status===e).length)})]})]})}),(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"With Doctor"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-blue-600",children:(t="with-doctor",m.filter(e=>e.status===t).length)})]})]})}),(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(x,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-green-600",children:(s="completed",m.filter(e=>e.status===s).length)})]})]})})]}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Patient to Queue"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Patient Name *"}),(0,a.jsx)("input",{type:"text",value:k.name,onChange:e=>C(t=>({...t,name:e.target.value})),className:"input-field mt-1",placeholder:"Enter patient name",autoFocus:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number (Optional)"}),(0,a.jsx)("input",{type:"tel",value:k.phone,onChange:e=>C(t=>({...t,phone:e.target.value})),className:"input-field mt-1",placeholder:"Enter phone number"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>b(!1),className:"btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{onClick:P,className:"btn-primary",children:"Add to Queue"})]})]})})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"px-4 py-5 sm:p-6",children:j?(0,a.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]},t))}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Queue #"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>{let t=g[e.status];return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:["#",e.queueNumber]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patientName})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.phone||"N/A"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.timestamp||e.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(p[e.status]),children:[(0,a.jsx)(t,{className:"w-3 h-3 mr-1"}),e.status.replace("-"," ")]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:["waiting"===e.status&&(0,a.jsx)("button",{onClick:()=>Z(e.id,"with-doctor"),className:"text-blue-600 hover:text-blue-900",children:"Start"}),"with-doctor"===e.status&&(0,a.jsx)("button",{onClick:()=>Z(e.id,"completed"),className:"text-green-600 hover:text-green-900",children:"Complete"})]})})]},e.id)})})]})})})})]})})}}},function(e){e.O(0,[256,726,313,971,23,744],function(){return e(e.s=1582)}),_N_E=e.O()}]);